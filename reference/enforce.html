<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Ensure the truth of R expressions and cast/recycle objects. — enforce • favr</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Ensure the truth of R expressions and cast/recycle objects. — enforce"><meta name="description" content="If any of the expressions in ... are not all TRUE, rlang::abort
is called for the first which was not (all) TRUE. Alternatively,
rlang::formulas can
be used to pass multiple objects to validation formulas/functions,
and/or attempt safe type casting and size recycling  using the
cast, recycle and coerce functions. The rhs of
formulas can be given in a list to pass multiple functions/formulas/calls.
Expressions are evaluated in the environment specified and objects
are assigned back into that environment. Type casting and recycling
are undertaken using the vctrs package
and thus apply vctrs type and size rules."><meta property="og:description" content="If any of the expressions in ... are not all TRUE, rlang::abort
is called for the first which was not (all) TRUE. Alternatively,
rlang::formulas can
be used to pass multiple objects to validation formulas/functions,
and/or attempt safe type casting and size recycling  using the
cast, recycle and coerce functions. The rhs of
formulas can be given in a list to pass multiple functions/formulas/calls.
Expressions are evaluated in the environment specified and objects
are assigned back into that environment. Type casting and recycling
are undertaken using the vctrs package
and thus apply vctrs type and size rules."><meta property="og:image" content="https://lj-jenkins.github.io/favr/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">favr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Ensure the truth of R expressions and cast/recycle objects.</h1>

      <div class="d-none name"><code>enforce.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>If any of the expressions in <code>...</code> are not all <code>TRUE</code>, <a href="https://rlang.r-lib.org/reference/abort.html" class="external-link">rlang::abort</a>
is called for the first which was not (<a href="https://rdrr.io/r/base/all.html" class="external-link">all</a>) <code>TRUE</code>. Alternatively,
<a href="https://rlang.r-lib.org/reference/new_formula.html" class="external-link">rlang::formulas</a> can
be used to pass multiple objects to validation formulas/functions,
and/or attempt safe type casting and size recycling  using the
<a href="favr_casting_recycling_helpers.html">cast</a>, <a href="favr_casting_recycling_helpers.html">recycle</a> and <a href="favr_casting_recycling_helpers.html">coerce</a> functions. The rhs of
formulas can be given in a <a href="https://rdrr.io/r/base/list.html" class="external-link">list</a> to pass multiple functions/formulas/calls.
Expressions are evaluated in the environment specified and objects
are assigned back into that environment. Type casting and recycling
are undertaken using the <a href="https://vctrs.r-lib.org/" class="external-link">vctrs</a> package
and thus apply <a href="https://vctrs.r-lib.org/articles/type-size.html" class="external-link">vctrs type and size rules</a>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">enforce</span><span class="op">(</span><span class="va">...</span>, .env <span class="op">=</span> <span class="fu">caller_env</span><span class="op">(</span><span class="op">)</span>, .error_call <span class="op">=</span> <span class="fu">caller_env</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>any number of R expressions or formulas to be evaluated.
Expressions must evaluate to logical whilst formulas can use <a href="https://rdrr.io/r/base/c.html" class="external-link">c</a> on
the lhs and either functions or formulas that evaluate to logical,
or one of the type/size functions: <a href="favr_casting_recycling_helpers.html">cast</a>, <a href="favr_casting_recycling_helpers.html">recycle</a> or
<a href="favr_casting_recycling_helpers.html">coerce</a> on the rhs. The rhs of a formula can also be a <a href="https://rdrr.io/r/base/list.html" class="external-link">list</a>
of multiple functions/formulas/calls. If an expression is named, or
if the list element on the rhs of a formula is named, the name is passed to
<a href="https://cli.r-lib.org/reference/format_inline.html" class="external-link">cli::format_inline</a> and is used in the error message.</p></dd>


<dt id="arg--env">.env<a class="anchor" aria-label="anchor" href="#arg--env"></a></dt>
<dd><p>the environment to use for the evaluation of the
expressions and the assignment of the objects.</p></dd>


<dt id="arg--error-call">.error_call<a class="anchor" aria-label="anchor" href="#arg--error-call"></a></dt>
<dd><p>the call environment to use for error messages
(passed to <a href="https://rlang.r-lib.org/reference/abort.html" class="external-link">rlang::abort</a>).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>NULL, but objects casted/recycled in <code>...</code> will be changed in
the <code>.env</code> environment specified.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>See <a href="abort_if_not.html">abort_if_not</a> for only validations and
<a href="schema.html">schema</a> for a data-masked version of this function.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># NB: Some of these examples are expected to produce an error. To</span></span></span>
<span class="r-in"><span><span class="co">#     prevent them from terminating a run with example() they are</span></span></span>
<span class="r-in"><span><span class="co">#     piped into a call to try().</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">1L</span></span></span>
<span class="r-in"><span><span class="va">y</span> <span class="op">&lt;-</span> <span class="st">"hi"</span></span></span>
<span class="r-in"><span><span class="va">z</span> <span class="op">&lt;-</span> \<span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="va">x</span> <span class="op">&gt;</span> <span class="fl">1</span></span></span>
<span class="r-in"><span><span class="fu">enforce</span><span class="op">(</span><span class="va">x</span> <span class="op">==</span> <span class="fl">1</span>, <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">is.character</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/is.function.html" class="external-link">is.function</a></span><span class="op">(</span><span class="va">z</span><span class="op">)</span><span class="op">)</span> <span class="co"># all TRUE</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">enforce</span><span class="op">(</span><span class="va">x</span> <span class="op">==</span> <span class="fl">2</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="kw"><a href="https://rdrr.io/r/base/try.html" class="external-link">try</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Error in eval(expr, envir) : </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="font-weight: bold;">Caused by error in `enforce()`</span>.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> In argument: `x == 2`.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BBBB00;">!</span> Returned `FALSE`.</span>
<span class="r-in"><span><span class="co"># Error:</span></span></span>
<span class="r-in"><span><span class="co"># Caused by error in `enforce()`:</span></span></span>
<span class="r-in"><span><span class="co"># ℹ In argument: `x == 2`.</span></span></span>
<span class="r-in"><span><span class="co"># ! Returned `FALSE`.</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># A custom error message can be given for each expression by</span></span></span>
<span class="r-in"><span><span class="co"># naming it:</span></span></span>
<span class="r-in"><span><span class="fu">enforce</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="st">"{.var y} must be {.cls numeric}, check input"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">is.numeric</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span> <span class="op">|&gt;</span> <span class="kw"><a href="https://rdrr.io/r/base/try.html" class="external-link">try</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Error in eval(expr, envir) : </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="font-weight: bold;">Caused by error in `enforce()`</span>.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> In argument: `is.numeric(y)`.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BBBB00;">!</span> `y` must be <span style="color: #0000BB;">&lt;numeric&gt;</span>, check input</span>
<span class="r-in"><span><span class="co"># Error:</span></span></span>
<span class="r-in"><span><span class="co"># Caused by error in `enforce()`:</span></span></span>
<span class="r-in"><span><span class="co"># ℹ In argument: `is.numeric(y)`.</span></span></span>
<span class="r-in"><span><span class="co"># ! `y` must be &lt;numeric&gt;, check input</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Formulas can be used to take pass multiple objects</span></span></span>
<span class="r-in"><span><span class="co"># on the lhs, with functions/additional formulas required on</span></span></span>
<span class="r-in"><span><span class="co"># the rhs:</span></span></span>
<span class="r-in"><span><span class="fu">enforce</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="st">"multiple objects using: {.fn c}"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span> <span class="op">~</span> <span class="va">is.integer</span></span></span>
<span class="r-in"><span><span class="op">)</span> <span class="op">|&gt;</span> <span class="kw"><a href="https://rdrr.io/r/base/try.html" class="external-link">try</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Error in eval(expr, envir) : </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="font-weight: bold;">Caused by error in `enforce()`</span>.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> For named element: `y`.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> In argument: `c(x, y) ~ is.integer`.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BBBB00;">!</span> multiple objects using: `c()`</span>
<span class="r-in"><span><span class="co"># Error:</span></span></span>
<span class="r-in"><span><span class="co"># Caused by error in `enforce()`:</span></span></span>
<span class="r-in"><span><span class="co"># ℹ For named element: `y`.</span></span></span>
<span class="r-in"><span><span class="co"># ℹ In argument: `c(x, y) ~ is.integer`.</span></span></span>
<span class="r-in"><span><span class="co"># ! multiple objects using: `c()`</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Formulas can also be used with `cast()`, `recycle()`, and</span></span></span>
<span class="r-in"><span><span class="co"># `coerce()` on the rhs to safely cast or recycle objects:</span></span></span>
<span class="r-in"><span><span class="fu">enforce</span><span class="op">(</span><span class="va">x</span> <span class="op">~</span> <span class="fu"><a href="favr_casting_recycling_helpers.html">cast</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/double.html" class="external-link">double</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="co"># x is now numeric</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "numeric"</span>
<span class="r-in"><span><span class="fu">enforce</span><span class="op">(</span><span class="va">x</span> <span class="op">~</span> <span class="fu"><a href="favr_casting_recycling_helpers.html">recycle</a></span><span class="op">(</span><span class="fl">5</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="co"># x is now length 5</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 5</span>
<span class="r-in"><span><span class="fu">enforce</span><span class="op">(</span><span class="va">y</span> <span class="op">~</span> <span class="fu"><a href="favr_casting_recycling_helpers.html">coerce</a></span><span class="op">(</span>type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="op">)</span>, size <span class="op">=</span> <span class="fl">5</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span> <span class="co"># y is now factor and length 5</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] hi hi hi hi hi</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Levels: hi</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Multiple calls can be used with formulas by wrapping them</span></span></span>
<span class="r-in"><span><span class="co"># in `list()`, with the names of list elements being</span></span></span>
<span class="r-in"><span><span class="co"># preferentially chosen for error messaging and the error</span></span></span>
<span class="r-in"><span><span class="co"># message also showing which formula/function/call caused the</span></span></span>
<span class="r-in"><span><span class="co"># error:</span></span></span>
<span class="r-in"><span><span class="fu">enforce</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="st">"generic message"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, <span class="va">z</span><span class="op">)</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/funprog.html" class="external-link">Negate</a></span><span class="op">(</span><span class="va">is.null</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="st">"{.var specific} message"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/funprog.html" class="external-link">Negate</a></span><span class="op">(</span><span class="va">is.function</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span> <span class="op">|&gt;</span> <span class="kw"><a href="https://rdrr.io/r/base/try.html" class="external-link">try</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Error in eval(expr, envir) : </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="font-weight: bold;">Caused by error in `enforce()`</span>.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> For named element: `z`.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> In argument: `c(x, y, z) ~ list(... Negate(is.function) ...)`.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BBBB00;">!</span> `specific` message</span>
<span class="r-in"><span><span class="co"># Error:</span></span></span>
<span class="r-in"><span><span class="co"># Caused by error in `enforce()`:</span></span></span>
<span class="r-in"><span><span class="co"># ℹ For named element: `z`.</span></span></span>
<span class="r-in"><span><span class="co"># ℹ In argument: `c(x, y, z) ~ list(... Negate(is.function) ...)`.</span></span></span>
<span class="r-in"><span><span class="co"># ! `specific` message</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Changed elements are available immediately:</span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="va">y</span> <span class="op">&lt;-</span> <span class="fl">1L</span></span></span>
<span class="r-in"><span><span class="fu">enforce</span><span class="op">(</span><span class="va">x</span> <span class="op">~</span> <span class="fu"><a href="favr_casting_recycling_helpers.html">cast</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/double.html" class="external-link">double</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>, <span class="va">y</span> <span class="op">~</span> <span class="fu"><a href="favr_casting_recycling_helpers.html">cast</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span><span class="op">)</span> <span class="co"># both now "numeric"</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> numeric numeric</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># The `.error_call` argument can be used to specify where the</span></span></span>
<span class="r-in"><span><span class="co"># error occurs, by default this is the caller environment:</span></span></span>
<span class="r-in"><span><span class="va">myfunc</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">...</span><span class="op">)</span> <span class="fu">enforce</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">myfunc</span><span class="op">(</span><span class="va">x</span> <span class="op">&gt;</span> <span class="fl">4</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="kw"><a href="https://rdrr.io/r/base/try.html" class="external-link">try</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Error in myfunc(x &gt; 4) : <span style="font-weight: bold;">Caused by error in `enforce()`</span>.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> In argument: `x &gt; 4`.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BBBB00;">!</span> Returned `FALSE`.</span>
<span class="r-in"><span><span class="co"># Error in `myfunc()`:</span></span></span>
<span class="r-in"><span><span class="co"># Caused by error in `enforce()`.</span></span></span>
<span class="r-in"><span><span class="co"># ℹ In argument: `x &gt; 4`.</span></span></span>
<span class="r-in"><span><span class="co"># ! Returned `FALSE`.</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># rlang injection can be used:</span></span></span>
<span class="r-in"><span><span class="va">msg</span> <span class="op">&lt;-</span> <span class="st">"{.var injection} msg"</span></span></span>
<span class="r-in"><span><span class="va">cols</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/substitute.html" class="external-link">quote</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">enforce</span><span class="op">(</span><span class="op">!</span><span class="op">!</span><span class="va">msg</span> <span class="op">:=</span> <span class="op">!</span><span class="op">!</span><span class="va">cols</span> <span class="op">~</span> <span class="va">is.integer</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="kw"><a href="https://rdrr.io/r/base/try.html" class="external-link">try</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Error in eval(expr, envir) : </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="font-weight: bold;">Caused by error in `enforce()`</span>.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> For named element: `x`.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> In argument: `c(x, y) ~ is.integer`.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BBBB00;">!</span> `injection` msg</span>
<span class="r-in"><span><span class="co"># Error:</span></span></span>
<span class="r-in"><span><span class="co"># Caused by error in `enforce()`:</span></span></span>
<span class="r-in"><span><span class="co"># ℹ For named element: `x`.</span></span></span>
<span class="r-in"><span><span class="co"># ℹ In argument: `c(x, y) ~ is.integer`.</span></span></span>
<span class="r-in"><span><span class="co"># ! `injection` msg</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Objects are reverted to their original values if an error</span></span></span>
<span class="r-in"><span><span class="co"># occur:</span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="va">y</span> <span class="op">&lt;-</span> <span class="fl">1L</span></span></span>
<span class="r-in"><span><span class="fu">enforce</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">x</span> <span class="op">~</span> <span class="fu"><a href="favr_casting_recycling_helpers.html">cast</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/double.html" class="external-link">double</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>, <span class="va">y</span> <span class="op">~</span> <span class="fu"><a href="favr_casting_recycling_helpers.html">recycle</a></span><span class="op">(</span><span class="fl">5</span><span class="op">)</span>, <span class="va">y</span> <span class="op">~</span> <span class="va">is.function</span></span></span>
<span class="r-in"><span><span class="op">)</span> <span class="op">|&gt;</span> <span class="kw"><a href="https://rdrr.io/r/base/try.html" class="external-link">try</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># errors</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Error in eval(expr, envir) : </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="font-weight: bold;">Caused by error in `enforce()`</span>.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> In argument: `y ~ is.function`.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BBBB00;">!</span> Returned `FALSE`.</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="co"># integer</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "integer"</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span> <span class="co"># 1</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Luke Jenkins.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

